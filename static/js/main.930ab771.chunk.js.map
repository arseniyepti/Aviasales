{"version":3,"sources":["components/TicketFilter/Shape.svg","components/App/logo.svg","styled/styled.jsx","styled/ticketFilterStyled.jsx","components/Buttons/Buttons.jsx","components/helpers/axiosInstance.js","styled/ticketResultStyled.jsx","components/helpers/helpers.js","components/TicketResult/TicketResult.jsx","components/TicketFilter/TicketFilter.jsx","components/App/App.jsx","styled/globalStyled.jsx","index.jsx"],"names":["module","exports","SectionTickets","styled","section","Logo","img","Wrap","div","Wrapper","ButtonLeft","button","activeLeftBtn","ButtonRight","activeRightBtn","WrapButton","Form","FormWrap","Title","h2","Checkbox","input","Label","label","shape","Buttons","handleChangeActiveBtn","onClick","instance","axios","create","baseURL","Ticket","ColumnWrap","Price","span","Info","InfoChange","InfoChangeMod","CompanyLogo","getFlyTime","origin","segments","value","originDate","Date","date","getTime","originTime","destinationDate","duration","destinationTime","getHours","getMinutes","convertMinutes","hours","Math","floor","mins","formatTransfers","stops","length","TicketResult","carrier","price","destination","src","alt","join","TicketFilter","state","tickets","checkboxId","getTickets","searchId","a","get","data","setState","concat","stop","getId","target","targetId","parseFloat","id","checked","filter","renderTickets","array","map","i","key","uniqueId","filterTransfers","fastCheapTickets","sort","b","filteredTickets","includes","this","onChange","type","htmlFor","React","Component","App","logo","GlobalStyle","createGlobalStyle","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.930ab771.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/Shape.0356a701.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo.158bb8bb.svg\";","import styled from 'styled-components';\r\n\r\nexport const SectionTickets = styled.section`\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\twidth: 960px;\r\n\tbackground-color: #F3F7FA;\r\n\tpadding: 50px;\r\n`\r\n\r\nexport const Logo = styled.img`\r\n\tdisplay: block;\r\n\twidth: 60px;\r\n\theight: 60px;\r\n\tmargin-bottom: 50px;\r\n\tborder-radius: 50%;\r\n\tbox-shadow: 0px 1px 11px rgba(55, 104, 142, 0.3);\r\n`;\r\n\r\nexport const Wrap = styled.div`\r\n\tdisplay: flex;\r\n\tflex-flow: row wrap;\r\n`\r\n","import styled from 'styled-components';\r\nimport shape from '../components/TicketFilter/Shape.svg'\r\n\r\nexport const Wrapper = styled.div`\r\n\tdisplay:flex;\r\n\tflex-flow: column nowrap;\r\n\twidth: 500px;\r\n`;\r\n\r\nexport const ButtonLeft = styled.button`\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\twidth: 250px;\r\n\tcolor: ${({activeLeftBtn}) => activeLeftBtn ? 'white' : '#4A4A4A'};\r\n\tfont-weight: 600;\r\n\theight: 50px;\r\n\ttext-transform: uppercase;\r\n\tfont-size: 12px;\r\n\tborder: 1px solid transparent;\r\n\tborder-right-width: 0px;\r\n\tborder-top-left-radius: 5px;\r\n\tborder-bottom-left-radius: 5px;\r\n\tbackground-color: ${({activeLeftBtn}) => activeLeftBtn ? '#2196F3' : 'white'};\r\n`;\r\n\r\nexport const ButtonRight = styled(ButtonLeft)`\r\n\tborder-top-left-radius: 0px;\r\n\tborder-bottom-left-radius: 0px;\r\n\tborder-top-right-radius: 5px;\r\n\tborder-bottom-right-radius: 5px;\r\n\tborder-left-width: 0px;\r\n\tcolor: ${({activeRightBtn}) => activeRightBtn ? 'white' : '#4A4A4A'};\r\n\tbackground-color: ${({activeRightBtn}) => activeRightBtn ? '#2196F3' : 'white'};\r\n`;\r\n\r\nexport const WrapButton = styled.div`\r\n\twidth: 500px;\r\n\tdisplay: flex;\r\n\tflex-flow: row wrap;\r\n`;\r\nexport const Form = styled.div`\r\n\twidth: 232px;\r\n\tmargin-right: 20px;\r\n\tbackground-color: #fff;\r\n\tpadding: 20px 0 20px 0;\r\n\tdisplay: flex;\r\n\talign-self: flex-start;\r\n\tflex-flow: column nowrap;\r\n\tbox-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);\r\n\tborder-radius: 5px;\r\n\t`\r\n\texport const FormWrap = styled.div`\r\n\tdisplay:flex;\r\n\tflex-flow: row nowrap;\r\n`;\r\n\r\nexport const Title = styled.h2`\r\n\tpadding-left: 20px;\r\n\tpadding-bottom: 10px;\r\n\tfont-size: 12px;\r\n\tfont-weight: Bold;\r\n\ttext-transform: uppercase;\r\n\tmargin: 0;\r\n`;\r\n\r\nexport const Checkbox = styled.input`\r\n  position: absolute;\r\n\tz-index: -1;\r\n  opacity: 0;\r\n  \r\n&:checked + label:before {\r\n\tborder: 1px solid #2196F3;\r\n}\r\n\r\n&:checked + label:after {\r\n\topacity: 1;\r\n}\r\n`;\r\n\r\nexport const Wrap = styled.div`\r\n\theight: 40px;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\r\n&:hover {\r\n\tbackground-color: #F1FCFF;\r\n}\r\n`;\r\n\r\nexport const Label = styled.label`\r\n\twidth: 230px;\r\n\tmargin-left: 20px;\r\n\tfont-size: 13px;\r\n\tfont-weight: normal;\r\n\tposition: relative;\r\n\tcursor: pointer;\r\n\tpadding-left: 30px;\r\n\r\n&:before {\r\n\tcontent: '';\r\n\tposition: absolute;\r\n\ttop: -4px;\r\n\tleft: 0;\r\n\twidth: 20px;\r\n  height: 20px;\r\n  border: 1px solid #9ABBCE;\r\n\tborder-radius: 2px;\r\n\tbackground: #fff;\r\n  transition: .2s;\r\n}\r\n\r\n&:after {\r\n  content: '';\r\n  opacity: 0;\r\n\tposition: absolute;\r\n\ttop: 3px;\r\n\tleft: 4px;\r\n\twidth: 20px;\r\n\theight: 20px;\r\n  background: url(${shape}) no-repeat;\r\n}\r\n`","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {ButtonLeft, ButtonRight, WrapButton} from \"../../styled/ticketFilterStyled\";\r\n\r\nconst Buttons = ({activeLeftBtn, activeRightBtn, handleChangeActiveBtn}) => {\r\n    return (\r\n      <WrapButton>\r\n        <ButtonLeft activeLeftBtn={activeLeftBtn} onClick={handleChangeActiveBtn}>Самый дешевый</ButtonLeft>\r\n        <ButtonRight activeRightBtn={activeRightBtn} onClick={handleChangeActiveBtn}>Самый быстрый</ButtonRight>\r\n      </WrapButton>\r\n    );\r\n};\r\n\r\nButtons.propTypes = {\r\n  activeLeftBtn: PropTypes.bool.isRequired,\r\n  activeRightBtn: PropTypes.bool.isRequired,\r\n  handleChangeActiveBtn: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Buttons;","import axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n  baseURL: 'https://front-test.beta.aviasales.ru',\r\n});\r\nexport default instance;","import styled from 'styled-components';\r\n\r\nexport const Ticket = styled.div`\r\n\tdisplay: flex;\r\n\tflex-flow: row nowrap;\r\n\tmargin-top: 20px;\r\n\twidth: 500px;\r\n\theight: 195px;\r\n\tpadding: 10px 20px 20px 20px;\r\n\tbackground-color: #FFFFFF;\r\n\tbox-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);\r\n`\r\n\r\nexport const ColumnWrap = styled.div`\r\n\tdisplay: flex;\r\n\tflex-flow: column nowrap;\r\n\tjustify-content: flex-end;\r\n\twidth: 160px;\r\n`\r\n\r\nexport const Price = styled.span`\r\n\tdisplay: block;\r\n\\theight: 50px;\r\n\\tfont-size: 24px;\r\n\\tcolor: #2196F3;\r\n`\r\n\r\nexport const Info = styled.span`\r\n\tdisplay: inline-block;\r\n\theight: 20px;\r\n\tmargin-top: 10px;\r\n\tfont-size: 12px;\r\n\ttext-transform: uppercase;\r\n\tcolor: #A0B0B9;\r\n`\r\nexport const InfoChange = styled(Info)`\r\n\tmargin-top: 0px;\r\n\tfont-size: 14px;\r\n\tcolor: #4A4A4A;\r\n`\r\n\r\nexport const InfoChangeMod = styled(InfoChange)`\r\n\ttext-transform: lowercase;\r\n`\r\n\r\nexport const CompanyLogo = styled.img`\r\n\tmargin-bottom: auto;\r\n\theight: 50px;\r\n`\r\n","export const getFlyTime = (origin, segments) => {\r\n  const value = origin ? 0 : 1;\r\n  const originDate = new Date(segments[value].date).getTime();\r\n  const originTime = new Date(originDate);\r\n  const destinationDate = originDate + segments[value].duration * 60000;\r\n  const destinationTime = new Date(destinationDate);\r\n  return `${originTime.getHours() < 10 ? '0' + originTime.getHours() : originTime.getHours()} : ${destinationTime.getMinutes() < 10 ? '0' + destinationTime.getMinutes() : destinationTime.getMinutes()}`;\r\n};\r\n\r\nexport const convertMinutes = (origin, segments) => {\r\n  const value = origin ? 0 : 1;\r\n  const hours = Math.floor(segments[value].duration / 60);\r\n  const mins = segments[value].duration - (hours * 60);\r\n  return `${hours > 23 ? Math.floor(hours / 24) + 'д ' : ''} ${hours < 10 ? '0' + hours : hours}ч  ${mins < 10 ? '0' + mins : mins}м`;\r\n};\r\n\r\nexport const formatTransfers = (origin, segments) => {\r\n  const value = origin ? 0 : 1;\r\n  switch (true) {\r\n    case (segments[value].stops.length > 1): {\r\n      return `${segments[value].stops.length} пересадки`;\r\n    }\r\n    case (segments[value].stops.length === 1): {\r\n      return '1 пересадка';\r\n    }\r\n    default: {\r\n      return 'Без пересадок';\r\n    }\r\n  }\r\n};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {CompanyLogo, InfoChangeMod, ColumnWrap, Info, Price, InfoChange, Ticket} from '../../styled/ticketResultStyled';\r\nimport {getFlyTime, convertMinutes, formatTransfers} from '../helpers/helpers';\r\n\r\nconst TicketResult = ({carrier, price, segments}) => {\r\n  return (\r\n    <Ticket>\r\n      <ColumnWrap>\r\n        <Price>{price}</Price>\r\n        <Info>{`${segments[0].origin} - ${segments[0].destination}`}</Info>\r\n        <InfoChange>{getFlyTime('origin', segments)}</InfoChange>\r\n        <Info>{`${segments[1].origin} - ${segments[1].destination}`}</Info>\r\n        <InfoChange>{getFlyTime(null, segments)}</InfoChange>\r\n      </ColumnWrap>\r\n      <ColumnWrap>\r\n        <Info>В пути</Info>\r\n        <InfoChangeMod>{convertMinutes('origin', segments)}</InfoChangeMod>\r\n        <Info> В пути</Info>\r\n        <InfoChangeMod>{convertMinutes(null, segments)}</InfoChangeMod>\r\n      </ColumnWrap>\r\n      <ColumnWrap>\r\n        <CompanyLogo src={`http://pics.avs.io/99/36/${carrier}.png`} alt=\"лого авиа компании\" carrier={carrier}/>\r\n        <Info>{formatTransfers('origin', segments)}</Info>\r\n        <InfoChange>{segments[0].stops.join(', ')}</InfoChange>\r\n        <Info>{formatTransfers(null, segments)}</Info>\r\n        <InfoChange>{segments[1].stops.join(', ')}</InfoChange>\r\n      </ColumnWrap>\r\n    </Ticket>\r\n  )\r\n};\r\n\r\nTicketResult.propTypes = {\r\n  carrier: PropTypes.string.isRequired,\r\n  price: PropTypes.oneOfType([\r\n    PropTypes.string,\r\n    PropTypes.number,\r\n  ]),\r\n  segments: PropTypes.array.isRequired,\r\n};\r\n\r\nexport default TicketResult;","import React from \"react\";\r\nimport {uniqueId} from \"lodash\";\r\nimport Buttons from \"../Buttons/Buttons\";\r\nimport instance from \"../helpers/axiosInstance\";\r\nimport {Form, Title, Checkbox, Label, Wrap, FormWrap, Wrapper} from \"../../styled/ticketFilterStyled\";\r\nimport TicketResult from \"../TicketResult/TicketResult\";\r\n\r\nexport default class TicketFilter extends React.Component {\r\n  state = {\r\n    activeLeftBtn: true,\r\n    activeRightBtn: false,\r\n    tickets: [],\r\n    checkboxId: [],\r\n  };\r\n\r\n  async componentDidMount() {\r\n    const {data: {searchId}} = await instance.get(\"/search\");\r\n    this.getTickets(searchId);\r\n  }\r\n\r\n  getTickets = async (searchId) => {\r\n    const {tickets} = this.state;\r\n    try {\r\n      const {data} = await instance.get(`/tickets?searchId=${searchId}`);\r\n      this.setState({\r\n        tickets: tickets.concat(data.tickets),\r\n      });\r\n      if (!data.stop) {\r\n        this.getTickets(searchId);\r\n      }\r\n    } catch (event) {\r\n      if (event) {\r\n        this.getTickets(searchId);\r\n      }\r\n    }\r\n  };\r\n\r\n  handleChangeActiveBtn = () => {\r\n    this.setState(({activeLeftBtn, activeRightBtn}) => ({\r\n      activeLeftBtn: !activeLeftBtn,\r\n      activeRightBtn: !activeRightBtn,\r\n    }))\r\n  };\r\n\r\n  getId = ({target}) => {\r\n    const {checkboxId} = this.state;\r\n    const targetId = parseFloat(target.id);\r\n    this.setState({\r\n      checkboxId: target.checked ? [...checkboxId, targetId] : checkboxId.filter((id) => id !== targetId),\r\n    });\r\n  };\r\n\r\n  renderTickets = (array) => {\r\n    return array.map(({segments, carrier, price}, i) => {\r\n      if (i < 5) {\r\n        return <TicketResult key={uniqueId()} carrier={carrier} price={price} segments={segments}/>\r\n      }\r\n      return null;\r\n    });\r\n  }\r\n\r\n  filterTransfers = () => {\r\n    const {tickets, activeLeftBtn, checkboxId} = this.state;\r\n    const fastCheapTickets = tickets.sort((a, b) => {\r\n      if (activeLeftBtn) {\r\n        return a.price - b.price;\r\n      }\r\n      return (a.segments[0].duration + a.segments[1].duration) - (b.segments[0].duration + b.segments[1].duration);\r\n    });\r\n    const filteredTickets = fastCheapTickets.filter(({segments}) => {\r\n      return checkboxId.includes(segments[0].stops.length) || checkboxId.includes(segments[1].stops.length);\r\n    });\r\n    const array = checkboxId.length !== 0 && !(checkboxId.includes(4)) ? filteredTickets : fastCheapTickets;\r\n    return this.renderTickets(array);\r\n  };\r\n\r\n  render() {\r\n    const {activeLeftBtn, activeRightBtn} = this.state;\r\n    return (\r\n      <FormWrap>\r\n        <Form>\r\n          <Title>Количество пересадок</Title>\r\n          <Wrap>\r\n            <Checkbox onChange={this.getId} type=\"checkbox\" id=\"4\"/>\r\n            <Label htmlFor=\"4\">Все</Label>\r\n          </Wrap>\r\n          <Wrap>\r\n            <Checkbox onChange={this.getId} type=\"checkbox\" id=\"0\"/>\r\n            <Label htmlFor=\"0\">Без пересадок</Label>\r\n          </Wrap>\r\n          <Wrap>\r\n            <Checkbox onChange={this.getId} type=\"checkbox\" id=\"1\"/>\r\n            <Label htmlFor=\"1\">1 пересадка</Label>\r\n          </Wrap>\r\n          <Wrap>\r\n            <Checkbox onChange={this.getId} type=\"checkbox\" id=\"2\"/>\r\n            <Label htmlFor=\"2\">2 пересадки</Label>\r\n          </Wrap>\r\n          <Wrap>\r\n            <Checkbox onChange={this.getId} type=\"checkbox\" id=\"3\"/>\r\n            <Label htmlFor=\"3\">3 пересадки</Label>\r\n          </Wrap>\r\n        </Form>\r\n        <Wrapper>\r\n          <Buttons activeLeftBtn={activeLeftBtn} activeRightBtn={activeRightBtn}\r\n                   handleChangeActiveBtn={this.handleChangeActiveBtn}/>\r\n          {this.filterTransfers()}\r\n        </Wrapper>\r\n      </FormWrap>\r\n    )\r\n  }\r\n}","import React from 'react';\r\nimport {SectionTickets, Logo, Wrap} from '../../styled/styled';\r\nimport TicketFilter from \"../TicketFilter/TicketFilter\";\r\nimport logo from './logo.svg';\r\n\r\nfunction App() {\r\n  return (\r\n    <SectionTickets>\r\n      <Logo src={logo} alt=\"logo aviasales\"/>\r\n      <Wrap>\r\n        <TicketFilter/>\r\n      </Wrap>\r\n    </SectionTickets>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import {createGlobalStyle} from 'styled-components';\r\n\r\nexport const GlobalStyle = createGlobalStyle`\r\n*{\r\n  box-sizing: border-box;\r\n}\r\n  body {\r\n    font-family: 'Open Sans', sans-serif;\r\n    font-weight: 600;\r\n    font-size: 14px;\r\n    display: flex;\r\n    justify-content: center;\r\n    color: #4A4A4A;\r\n  }\r\n`","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {Normalize} from 'styled-normalize';\r\nimport App from './components/App/App';\r\nimport {GlobalStyle} from './styled/globalStyled';\r\n\r\nReactDOM.render(\r\n  <>\r\n    <Normalize/>\r\n    <GlobalStyle/>\r\n    <App/>\r\n  </>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}